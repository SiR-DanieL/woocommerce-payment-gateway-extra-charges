jQuery(document).ready(function(a){a("button.calc_totals").unbind("click");console.log(a("button.calc_totals").unbind("click"));a("button.calc_totals").on("click",function(){a("#woocommerce-order-totals").block({message:null,overlayCSS:{background:"#fff url("+woocommerce_writepanel_params.plugin_url+"/assets/images/ajax-loader.gif) no-repeat center",opacity:0.6}});if(confirm(woocommerce_writepanel_params.calc_totals)){var f=0,g=0,e=0,b=0,d=0,c=a("#_order_shipping").val()||"0",h=a("#_order_shipping_tax").val()||
    "0",k=a("#_order_discount").val()||"0",l=a("#_extra-charge").val()||"0",c=accounting.unformat(c.replace(",",".")),h=accounting.unformat(h.replace(",",".")),k=accounting.unformat(k.replace(",",".")),l=accounting.unformat(l.replace(",","."));a("#order_items_list tr.item").each(function(){var m=a(this).find("input.line_subtotal").val()||"0",n=a(this).find("input.line_subtotal_tax").val()||"0",b=a(this).find("input.line_total").val()||"0",c=a(this).find("input.line_tax").val()||"0",m=accounting.unformat(m.replace(",",
    ".")),n=accounting.unformat(n.replace(",",".")),b=accounting.unformat(b.replace(",",".")),c=accounting.unformat(c.replace(",","."));f+=m;g+=n;e+=b;"no"==woocommerce_writepanel_params.round_at_subtotal&&(c=accounting.toFixed(c,2));d+=parseFloat(c)});"yes"==woocommerce_writepanel_params.round_at_subtotal&&(d=accounting.toFixed(d,2));b=f+g-(e+d);0>b&&(b=0);b=accounting.toFixed(b,2);a("#order_items_list tr.fee").each(function(){var c=a(this).find("input.line_total").val()||"0",b=a(this).find("input.line_tax").val()||
    "0",c=accounting.unformat(c.replace(",",".")),b=accounting.unformat(b.replace(",","."));e+=c;"no"==woocommerce_writepanel_params.round_at_subtotal&&(b=accounting.toFixed(b,2));d+=parseFloat(b)});"yes"==woocommerce_writepanel_params.round_at_subtotal&&(d=parseFloat(accounting.toFixed(d,2)));c=accounting.toFixed(e+d+c+h+l-k,2);d=accounting.toFixed(d,2);a("#_cart_discount").val(b).change();a("#_order_tax").val(d).change();a("#_order_total").val(c).change()}a("#woocommerce-order-totals").unblock();return!1})});